<!--begin::Summary-->
<div class="card card-flush h-lg-100">
    <!--begin::Card header-->
    <div class="card-header mt-6">
        <!--begin::Card title-->
        <div class="card-title flex-column">
            <h3 class="fw-bold mb-1">Form Builder</h3>
            <div class="fs-6 fw-semibold text-gray-500">24 Overdue Tasks</div>
        </div>
        <!--end::Card title-->
        <!--begin::Card toolbar-->
        <div class="card-toolbar">
            <button type="button" class="btn btn-sm btn-light me-3" data-bs-toggle="modal" data-bs-target="#embedModal">Embed</button>
            <button type="button" class="btn btn-sm btn-light-primary" data-bs-toggle="modal" data-bs-target="#newFormFieldModal">New Form Field</button>
        </div>
        <!--end::Card toolbar-->
    </div>
    <!--end::Card header-->
    <!--begin::Card body-->
    <div class="card-body p-9 pt-5">
        <div class="row" id="form-fields-preview">
            <% @form.form_fields.each do |field| %>
                <div class="mb-3 col-12 col-md-<%= field.col_width %> form-field">
                    <div class="form-field__edit-overlay btn-group">
                        <a href="<%= edit_form_field_path(params[:project_apikey], @form.apikey, field.apikey) %>" class="edit-overlay__btn btn btn-sm btn-light-primary">Edit</a>
                        <button class="edit-overlay__btn btn btn-sm btn-light-primary" data-overlay-action="move">Move</button>
                        <button class="edit-overlay__btn btn btn-sm btn-light-danger" data-overlay-action="destroy">Destroy</button>
                    </div>
                    <%= form_field(field) %>
                    <input type="hidden" id="response[<%= field.field_id %>][field_type]" name="response[<%= field.field_id %>][field_type]" value="<%= field.field_type %>" />
                    <input type="hidden" id="response[<%= field.field_id %>][name]" name="response[<%= field.field_id %>][name]" value="<%= field.name %>" />
                </div>
            <% end %>
        </div>
        <button class="btn btn-primary">Submit</button>
    </div>
    <!--end::Card body-->
</div>
<!--end::Summary-->

<!-- begin::New Form Field Modal -->
<div class="modal fade" id="newFormFieldModal" tabindex="-1" aria-labelledby="newFormFieldModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="newFormFieldModalLabel">Form Field</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <%= form_with url: create_form_field_path(params[:project_apikey], @form.apikey), id: "new-form-field-form" do |f| %>
                <%= render 'custom_forms/show_tabs/form_field_form', f: f %>
            <% end %>
        </div>
    </div>
</div>
<!-- end::New Form Field Modal -->
<!-- begin::Embed Modal -->
<div class="modal fade" id="embedModal" tabindex="-1" aria-labelledby="embedModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="embedModalLabel">Embed</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            <pre><code><%= form_html(@form) %></code></pre>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light-secondary" onclick='copyToClipboard(`<%= form_html(@form) %>`)'>Copy to Clipboard</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>
<!-- end::Embed Modal -->
<% content_for :page_scripts do %>
<%= javascript_include_tag 'copy-to-clipboard', 'data-turbolinks-track': 'reload' %>
<%= javascript_include_tag 'custom_forms/new-form-field.js', 'data-turbolinks-track': 'reload' %>
<% end %>